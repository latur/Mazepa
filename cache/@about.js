function ivEncodeEntities(t){return $("<div/>").text(t).html()}function ivDecodeEntities(t){return $("<div/>").html(t).text()}function FixWidth(t,i,n,e){var o=n||80,e=e||0;$(t).each(function(){var t=$(this),n=t.width()-1,r=t.find(i),a=parseInt(n/o)+1;if(a>r.length)return!0;var c=n/a-2*e;r.css({width:c+"px",height:c+"px"}),t.css({minHeight:c*parseInt(r.length/a)-1})}),console.log("Выровнено! =)")}var host="mazepa.us",hard="//hard.mazepa.us",token=token||"",api=api||"/root/library/",Library=function(t,i){var n=!1;return function(e,o,r){return n?void console.log("> Множественные запросы запрещены"):(n=!0,void $.post(i+e,$.extend({token:t},o||{}),function(i){return n=!1,"object"==typeof i?(t=i.token||!1,t||console.log("> Ошибка: token не найден"),void("function"==typeof r&&r(i))):void console.log("> Некорректен формат ответа сервера")},"json"))}}(token,api),Templates=function(t){var i={};return $(t).each(function(){i[$(this).attr("id")]=$(this).remove().html()}),function(t,n){var n=n||{},e=i[t]||"";for(var o in n){var r=new RegExp("{"+o+"}","g");e=e.replace(r,n[o])}return e}}(".template"),Modal=function(){var t=function(){return $(".msg, .black").remove(),!1},i=function(i,n,e){$("body").append('<div class="black"></div><div class="box msg"></div>');var e=parseInt(e||300);100>e&&(e=300),e>$(window).width()-40&&(e=$(window).width()-40),$(".black").click(t).fadeIn(300);var o=$(".msg").append(i||"<h2>Modal</h2>").addClass("animation-jelly");o.css({width:e,marginLeft:-e/2,top:"50%",marginTop:-o.height()/2-15}),(n||function(){})(o)};return{Open:i,Close:t}}(),Picture=function(){var t=function(t){if(!t)return[0,0];var i=t.split(".").slice(-2,-1)[0],n=t.split(".").slice(-3,-2)[0],e=(i.indexOf("x")>=0?i:n).split("x"),o=[e[0]||1,e[1]||1];return o},i=function(i){var n=t(i);return n[0]>$(window).width()||n[1]>$(window).height()},n=function(t){return t.src_small&&i(t.src_small)?hard+t.src_small:t.src_medium&&i(t.src_medium)?hard+t.src_medium:t.src_large&&i(t.src_large)?hard+t.src_large:hard+t.src_main},e=function(i){var e=t(n(i)),o={W:e[0]||1,H:e[1]||1,padding:e[2]||0},r=o.W/o.H,a={W:$(window).width(),H:$(window).height()},c={top:0,left:0,height:o.H,width:o.W},s=r>a.W/(a.H-o.padding);return(1.5*o.W>a.W||1.5*o.H>a.H)&&(s?(c.height=a.W/r,c.width=a.W):(c.width=(a.H-o.padding)*r,c.height=a.H-o.padding)),c.top=(a.H-o.padding-(c.height||o.H))/2,c.left=(a.W-(c.width||o.W))/2,c};return{Src:n,CSS:e,Size:t}}(),Stack=function(){var t={};return function(i,n){if(i){var e=i.toString();t[e]&&clearInterval(t[e].timeout),t[e]={timer:n||500},t[e].timeout=setInterval(function(){return t[e].timer>0?t[e].timer-=50:(clearInterval(t[e].timeout),void i())},50)}}}(),OAuth=function(){var t="https://"+host+"/login/oauth?type=",i={vk:["https://oauth.vk.com/authorize?client_id=4560732","display=popup","scope=friends","redirect_uri="+t+"vk","response_type=code"].join("&"),fb:["https://www.facebook.com/dialog/oauth?client_id=198760110163592","display=popup","redirect_uri="+t+"fb"].join("&"),gp:["https://accounts.google.com/o/oauth2/auth?client_id=183366446733-u0in3boluil3n9lhqv66g5p63lm52onf.apps.googleusercontent.com","response_type=code","scope=openid","redirect_uri="+t+"gp"].join("&")},n=function(t){if($(this).data("id")&&(t=$(this).data("id")),!i[t])return!1;{var n="status=1,width=600,height=420,location=0,menubar=0,centerscreen=yes",e=window.open(i[t],"OAuth",n);window.location.hostname.split(".")}setInterval(function(){-1!=e.location.hash.indexOf("success")&&(location.reload(),e.close())},400)};return n}();$(function(){var t=function(){$("#main").css({minHeight:$(window).height()-38})};$(window).resize(t),t();var i=function(){Modal.Open(Templates("loginModal"),function(){$(".list .ss a").click(OAuth)},400)};$(".login").click(i)});!function(t){"use strict";function e(t){var e=0,a=0;if(t.offsetParent)do e+=t.offsetLeft,a+=t.offsetTop;while(t=t.offsetParent);return{top:a,left:e}}function a(t){var e="";for(var a in t)t.hasOwnProperty(a)&&(e+=a+":"+t[a]+";");return e}var i=i||{},n=document.querySelectorAll.bind(document),r={duration:500,show:function(t){var i=this,n=document.createElement("div");n.className=n.className+"waves-ripple",i.appendChild(n);var o=e(i),s=t.pageY-o.top,d=t.pageX-o.left,u=1.4*i.clientWidth;n.setAttribute("data-hold",Date.now()),n.setAttribute("data-x",d),n.setAttribute("data-y",s);var l={top:s+"px",left:d+"px"};n.className=n.className+" waves-notransition",n.setAttribute("style",a(l)),n.offsetHeight,n.className=n.className.replace("waves-notransition",""),l["border-width"]=u+"px",l["margin-top"]="-"+u+"px",l["margin-left"]="-"+u+"px",l.opacity="1",l["-webkit-transition-duration"]=r.duration+"ms",l["-moz-transition-duration"]=r.duration+"ms",l["-o-transition-duration"]=r.duration+"ms",l["transition-duration"]=r.duration+"ms",n.setAttribute("style",a(l))},hide:function(){for(var t=this,e=1.4*t.clientWidth,i=null,n=0;n<t.children.length;n++)-1===t.children[n].className.indexOf("waves-ripple")||(i=t.children[n]);if(!i)return!1;var o=i.getAttribute("data-x"),s=i.getAttribute("data-y"),d=Date.now()-Number(i.getAttribute("data-hold")),u=500-d;0>u&&(u=0),setTimeout(function(){var n={top:s+"px",left:o+"px","border-width":e+"px","margin-top":"-"+e+"px","margin-left":"-"+e+"px",opacity:"0","-webkit-transition-duration":r.duration+"ms","-moz-transition-duration":r.duration+"ms","-o-transition-duration":r.duration+"ms","transition-duration":r.duration+"ms"};i.setAttribute("style",a(n)),setTimeout(function(){try{t.removeChild(i)}catch(e){return!1}},300)},u)},wrapInput:function(t){for(var e=0;e<t.length;e++){var a=t[e];if("input"===a.tagName.toLowerCase()){var i=a.parentNode;if("i"===i.tagName.toLowerCase()&&-1!==i.className.indexOf("waves-effect"))return!1;var n=document.createElement("i");n.className=a.className+" waves-input-wrapper";var r=a.getAttribute("style"),o="width:"+a.offsetWidth+"px;height:"+a.clientHeight+"px;";r||(r=""),n.setAttribute("style",o+r),a.className="waves-button-input",a.removeAttribute("style"),i.replaceChild(n,a),n.appendChild(a)}}}};i.displayEffect=function(e){e=e||{},"duration"in e&&(r.duration=e.duration),r.wrapInput(n(".waves-effect")),Array.prototype.forEach.call(n(".waves-effect"),function(e){t.Touch&&(e.addEventListener("touchstart",r.show,!1),e.addEventListener("touchend",r.hide,!1)),e.addEventListener("mousedown",r.show,!1),e.addEventListener("mouseup",r.hide,!1),e.addEventListener("mouseleave",r.hide,!1)})},t.Waves=i}(window);!function(e){e.fn.fsvs=function(n){n=n||{};var i={speed:5e3,bodyID:"fsvs-body",selector:"> .slide",mouseSwipeDisance:40,afterSlide:function(){},beforeSlide:function(){},endSlide:function(){},mouseWheelEvents:!0,mouseWheelDelay:!1,mouseDragEvents:!0,touchEvents:!0,arrowKeyEvents:!0,pagination:!0,nthClasses:!1,detectHash:!0};for(var s in n)i[s]=n[s];n=i;var t=0,a=!1,o=null,l=null,d=!1,r=0,c=!1,u=function(){var e=window.chrome,n=window.navigator.vendor;return null!==e&&"Google Inc."===n?!0:!1},f=function(){if(!a&&""!==window.location.hash){var n=window.location.hash,i=e("> "+n,l);E.slideToIndex(i.index())}a=!1},v=function(){e(n.selector,l).each(function(n){var i=e(this);i.attr("id")||i.attr("id","slide-"+(n+1))}),f()},h=function(){prefixes=["Webkit","Moz","ms","O"];for(var e in prefixes)if("undefined"!=typeof document.getElementsByTagName("body")[0].style[prefixes[e]+"Transition"])return!0;return!1},w=function(){var e;window.onmousedown=function(n){e=n.y},window.onmouseup=function(i){i.y>e+n.mouseSwipeDisance?E.slideUp():i.y<e-n.mouseSwipeDisance&&E.slideDown()}},p=function(){var i=null;e(window).on("touchstart",function(e){var n=e.originalEvent;if("a"!==n.target.nodeName.toLowerCase()){var s=n.touches;s&&s.length&&(i=s[0].pageY),n.preventDefault()}}),e(window).on("touchmove",function(e){var s=e.originalEvent;if(null!==i){var t=s.touches;if(t&&t.length){var a=i-t[0].pageY;a>=n.mouseSwipeDisance&&(E.slideDown(),i=null),a<=-1*n.mouseSwipeDisance&&(E.slideUp(),i=null)}s.preventDefault()}})},m=function(e){var i=window.event||e,s=i.wheelDelta||-i.detail||i.originalEvent.detail,t=Math.max(-1,Math.min(1,s));u()&&(s=Math.floor(s/5)),(!d||n.mouseWheelDelay&&Date.now()>r+n.mouseWheelDelay)&&Math.abs(s)>5&&(r=Date.now(),d=!0,i.originalEvent&&i.originalEvent.detail?t>0?E.slideDown():E.slideUp():t>0?E.slideUp():E.slideDown())},g=function(){e(window).bind("wheel mousewheel DOMMouseScroll MozMousePixelScroll",m)},C=function(){allow=!0,e("input,textarea,select,option",l).bind("focus.fsvs",function(){allow=!1}).bind("blur.fsvs",function(){allow=!0}),window.onkeydown=function(e){e=e||window.event,"38"==e.keyCode&&allow?E.slideUp():"40"==e.keyCode&&allow&&E.slideDown()}},D=function(i){if(t=i,n.afterSlide(i),n.detectHash){var s=e(n.selector,l).eq(i);window.location.hash=s[0].id}E.canSlideDown()||n.endSlide(i),d=!1},y=function(i){e(n.selector,l).each(function(n){var s="nth-class-"+(n%i+1);e(this).hasClass(s)||e(this).addClass(s)})},S=function(i){n.beforeSlide(i),l.is(":animated")&&(t=i,l.stop()),l.animate({top:"-"+i*e(window).height()+"px"},n.speed,function(){D(i)})},b=function(e){n.beforeSlide(e),l.css({"-webkit-transform":"translate3d(0, -"+100*e+"%, 0)","-moz-transform":"translate3d(0, -"+100*e+"%, 0)","-ms-transform":"translate3d(0, -"+100*e+"%, 0)",transform:"translate3d(0, -"+100*e+"%, 0)"}),null!==o&&(t=e,clearTimeout(o)),o=setTimeout(function(){D(e),o=null},n.speed)},E={nthClasses:y,addPagination:function(){c=e('<ul id="fsvs-pagination"></ul>'),e(n.selector,l).each(function(n){var i=t===n?"pagination-link active":"pagination-link";e('<li class="'+i+'"><span><span></span></span></li>').appendTo(c)}),0!==e("#fsvs-pagination").length&&e("#fsvs-pagination").remove(),c.appendTo(e("body"));var i=c.height(),s=n.speed/1e3;e("span",c).css({"-webkit-transition":"all "+s+"s","-moz-transition":"all "+s+"s","-o-transition":"all "+s+"s",transition:"all "+s+"s"}),c.css({marginTop:"-"+i/2+"px",right:"25px"}),e("li",c).click(function(n){a=!0,e(".active",c).removeClass("active"),e(this).addClass("active"),E.slideToIndex(e(this).index(),n)})},setSpeed:function(e){speed=e/1e3,l.css({"-webkit-transition":"all "+speed+"s","-moz-transition":"all "+speed+"s","-o-transition":"all "+speed+"s",transition:"all "+speed+"s"})},shouldRun:function(){return e("html").hasClass("fsvs")},canSlideUp:function(){return 0===t?!1:!0},canSlideDown:function(){return 0===e(n.selector,l).eq(t+1).length?!1:!0},addClasses:function(i,s){var t=e("body");t.removeClass(removeClass="active-slide-"+(i+1)),t.addClass("active-slide-"+(s+1)),e(n.selector,l).eq(i).removeClass("active-slide"),e(n.selector,l).eq(s).addClass("active-slide"),n.nthClasses&&(t.removeClass("active-nth-slide-"+(i%n.nthClasses+1)),t.addClass("active-nth-slide-"+(s%n.nthClasses+1)))},slideToIndex:function(n,i){var i=i||!1;!i&&c&&(e(".active",c).removeClass("active"),e("> *",c).eq(n).addClass("active")),E.addClasses(t,n),h()?b(n):S(n)},slideDown:function(e){E.canSlideDown()?(a=!0,E.slideToIndex(t+1,e)):d=!1},slideUp:function(e){E.canSlideUp()?(a=!0,E.slideToIndex(t-1,e)):d=!1},init:function(){l=e("#"+n.bodyID),h()&&E.setSpeed(n.speed),n.pagination&&E.addPagination(),n.nthClasses&&y(n.nthClasses),n.mouseWheelEvents&&g(),n.arrowKeyEvents&&C(),n.mouseDragEvents&&w(),n.touchEvents&&p(),n.detectHash&&(v(),window.addEventListener?window.addEventListener("hashchange",f,!1):window.attachEvent&&window.attachEvent("onhashchange",f)),E.addClasses(0,0)}};return E.shouldRun()&&E.init(),E}}(jQuery);!function(t){"use strict";function e(t){var e=0,a=0;if(t.offsetParent)do e+=t.offsetLeft,a+=t.offsetTop;while(t=t.offsetParent);return{top:a,left:e}}function a(t){var e="";for(var a in t)t.hasOwnProperty(a)&&(e+=a+":"+t[a]+";");return e}var i=i||{},n=document.querySelectorAll.bind(document),r={duration:500,show:function(t){var i=this,n=document.createElement("div");n.className=n.className+"waves-ripple",i.appendChild(n);var o=e(i),s=t.pageY-o.top,d=t.pageX-o.left,u=1.4*i.clientWidth;n.setAttribute("data-hold",Date.now()),n.setAttribute("data-x",d),n.setAttribute("data-y",s);var l={top:s+"px",left:d+"px"};n.className=n.className+" waves-notransition",n.setAttribute("style",a(l)),n.offsetHeight,n.className=n.className.replace("waves-notransition",""),l["border-width"]=u+"px",l["margin-top"]="-"+u+"px",l["margin-left"]="-"+u+"px",l.opacity="1",l["-webkit-transition-duration"]=r.duration+"ms",l["-moz-transition-duration"]=r.duration+"ms",l["-o-transition-duration"]=r.duration+"ms",l["transition-duration"]=r.duration+"ms",n.setAttribute("style",a(l))},hide:function(){for(var t=this,e=1.4*t.clientWidth,i=null,n=0;n<t.children.length;n++)-1===t.children[n].className.indexOf("waves-ripple")||(i=t.children[n]);if(!i)return!1;var o=i.getAttribute("data-x"),s=i.getAttribute("data-y"),d=Date.now()-Number(i.getAttribute("data-hold")),u=500-d;0>u&&(u=0),setTimeout(function(){var n={top:s+"px",left:o+"px","border-width":e+"px","margin-top":"-"+e+"px","margin-left":"-"+e+"px",opacity:"0","-webkit-transition-duration":r.duration+"ms","-moz-transition-duration":r.duration+"ms","-o-transition-duration":r.duration+"ms","transition-duration":r.duration+"ms"};i.setAttribute("style",a(n)),setTimeout(function(){try{t.removeChild(i)}catch(e){return!1}},300)},u)},wrapInput:function(t){for(var e=0;e<t.length;e++){var a=t[e];if("input"===a.tagName.toLowerCase()){var i=a.parentNode;if("i"===i.tagName.toLowerCase()&&-1!==i.className.indexOf("waves-effect"))return!1;var n=document.createElement("i");n.className=a.className+" waves-input-wrapper";var r=a.getAttribute("style"),o="width:"+a.offsetWidth+"px;height:"+a.clientHeight+"px;";r||(r=""),n.setAttribute("style",o+r),a.className="waves-button-input",a.removeAttribute("style"),i.replaceChild(n,a),n.appendChild(a)}}}};i.displayEffect=function(e){e=e||{},"duration"in e&&(r.duration=e.duration),r.wrapInput(n(".waves-effect")),Array.prototype.forEach.call(n(".waves-effect"),function(e){t.Touch&&(e.addEventListener("touchstart",r.show,!1),e.addEventListener("touchend",r.hide,!1)),e.addEventListener("mousedown",r.show,!1),e.addEventListener("mouseup",r.hide,!1),e.addEventListener("mouseleave",r.hide,!1)})},t.Waves=i}(window);$(document).ready(function(){var e=$.fn.fsvs({speed:700,bodyID:"fsvs-body",selector:"> .slide",mouseSwipeDisance:40,mouseWheelEvents:!0,mouseWheelDelay:!1,mouseDragEvents:!0,touchEvents:!0,arrowKeyEvents:!0,pagination:!0,nthClasses:!1,detectHash:!0});$("#footer").css({display:"none"}),$(".next a.down").click(function(){e.slideDown()}),$(".next a.autore").click(function(){Modal.Open(Templates("autore"),function(){$("a.close").click(Modal.Close)},460)}),function(){var e=document.querySelector(".liska__back--mover"),t={width:window.innerWidth,height:window.innerHeight},n=!1,s=0,i=0,o=0,a=0,c=0;window.addEventListener("mousemove",function(e){s=-1/(t.height/2)*e.clientY+1,i=1/(t.width/2)*e.clientX-1,o=20/t.width*e.clientX-10,a=20/t.height*e.clientY-10,c=100/t.height*e.clientY-50}),setTimeout(function(){n=!0},200),setInterval(function(){n&&(e.style.WebkitTransform="perspective(1000px) translate3d("+o+"px,"+a+"px,"+c+"px) rotate3d("+s+","+i+",0,2deg)",e.style.transform="perspective(1000px) translate3d("+o+"px,"+a+"px,"+c+"px) rotate3d("+s+","+i+",0,2deg)")},100)}(),$("body").append('<link href="/static/css/about.css" rel="stylesheet" type="text/css">')}),Waves.displayEffect();